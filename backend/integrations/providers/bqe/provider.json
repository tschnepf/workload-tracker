{
  "providerSchemaVersion": "1.0.0",
  "key": "bqe",
  "displayName": "BQE CORE",
  "oauth": {
    "flows": ["authorization_code_pkce"],
    "scopes": [
      "read:core",
      "offline_access"
    ],
    "authBaseUrl": "https://api-identity.bqecore.com/idp/connect/authorize",
    "tokenUrl": "https://api-identity.bqecore.com/idp/connect/token"
  },
  "requiredHeaders": [
    {
      "key": "X-UTC-OFFSET",
      "label": "UTC offset (minutes)",
      "source": "connection"
    }
  ],
  "baseUrlVariants": {
    "default": "https://api.bqecore.com/api",
    "sandbox": "https://api.bqecore.com/api"
  },
  "rateLimits": {
    "requestsPerMinute": 100,
    "burst": 100,
    "maxConcurrentPerConnection": 2,
    "globalRequestsPerMinute": 100
  },
  "objects": [
    {
      "key": "projects",
      "label": "Projects",
      "capabilities": {
        "list": true,
        "delta": true
      },
      "fields": [
        { "key": "id", "label": "Project ID", "type": "string", "nullable": false },
        { "key": "name", "label": "Project Name", "type": "string", "nullable": false },
        { "key": "number", "label": "Project Number", "type": "string", "nullable": true },
        { "key": "status", "label": "Status", "type": "string", "nullable": false },
        { "key": "clientName", "label": "Client Name", "type": "string", "nullable": true },
        { "key": "clientId", "label": "Client ID", "type": "string", "nullable": true },
        { "key": "parentId", "label": "Parent Project ID", "type": "string", "nullable": true },
        { "key": "rootProjectId", "label": "Root Project ID", "type": "string", "nullable": true },
        { "key": "lastUpdated", "label": "Last Updated", "type": "datetime", "nullable": false },
        { "key": "startDate", "label": "Start Date", "type": "date", "nullable": true },
        { "key": "endDate", "label": "End Date", "type": "date", "nullable": true }
      ],
      "hierarchy": {
        "parentKey": "parentId",
        "childPredicate": "parentId != null"
      },
      "filters": {
        "parentOnly": {
          "query": "parentId is null",
          "description": "Server-side filter that returns only top-level projects."
        },
        "delta": {
          "query": "lastUpdated>={cursor}",
          "description": "Delta filter for incremental syncs."
        }
      },
      "deletionPolicy": "mark_inactive_keep_link",
      "mapping": {
        "schemaVersion": "1.0.0",
        "defaults": [
          { "source": "clientName", "target": "project.client", "behavior": "write_once" },
          { "source": "clientName", "target": "project.bqe_client_name", "behavior": "follow_bqe" },
          { "source": "clientId", "target": "project.bqe_client_id", "behavior": "follow_bqe" },
          { "source": "name", "target": "project.name", "behavior": "follow_bqe" },
          { "source": "status", "target": "project.status", "behavior": "follow_bqe" },
          { "source": "number", "target": "project.project_number", "behavior": "write_once" }
        ]
      }
    },
    {
      "key": "clients",
      "label": "Clients",
      "capabilities": {
        "list": true,
        "delta": true
      },
      "fields": [
        { "key": "id", "label": "Client ID", "type": "string", "nullable": false },
        { "key": "name", "label": "Client Name", "type": "string", "nullable": false },
        { "key": "number", "label": "Client Number", "type": "string", "nullable": true },
        { "key": "status", "label": "Status", "type": "string", "nullable": true },
        { "key": "email", "label": "Email", "type": "string", "nullable": true },
        { "key": "phone", "label": "Phone", "type": "string", "nullable": true },
        { "key": "lastUpdated", "label": "Last Updated", "type": "datetime", "nullable": true }
      ],
      "filters": {
        "delta": {
          "query": "lastUpdated>={cursor}",
          "description": "Delta filter for incremental syncs."
        }
      },
      "mapping": {
        "schemaVersion": "1.0.0",
        "defaults": [
          { "source": "name", "target": "integration_client.name", "behavior": "follow_bqe" },
          { "source": "number", "target": "integration_client.client_number", "behavior": "follow_bqe" },
          { "source": "status", "target": "integration_client.status", "behavior": "follow_bqe" },
          { "source": "email", "target": "integration_client.email", "behavior": "follow_bqe" },
          { "source": "phone", "target": "integration_client.phone", "behavior": "follow_bqe" }
        ]
      }
    }
  ]
}

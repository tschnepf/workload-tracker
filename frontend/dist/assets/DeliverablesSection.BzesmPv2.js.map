{"version":3,"file":"DeliverablesSection.BzesmPv2.js","sources":["../../src/components/deliverables/DeliverablesSection.tsx"],"sourcesContent":["/**\r\n * Deliverables Section - STANDARDS COMPLIANT\r\n * Follows R2-REBUILD-STANDARDS.md and R2-REBUILD-DELIVERABLES.md\r\n * Integrates into existing Projects page split-panel layout\r\n * Features drag-and-drop reordering with grab handles\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Project, Deliverable } from '@/types/models';\r\nimport { deliverablesApi } from '@/services/api';\r\n\r\ninterface DeliverablesSectionProps {\r\n  project: Project;\r\n}\r\n\r\nconst DeliverablesSection: React.FC<DeliverablesSectionProps> = ({ project }) => {\r\n  const [deliverables, setDeliverables] = useState<Deliverable[]>([]);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [editingId, setEditingId] = useState<number | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\r\n  const [dragOverIndex, setDragOverIndex] = useState<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (project.id) {\r\n      loadDeliverables();\r\n    }\r\n  }, [project.id]);\r\n\r\n  const loadDeliverables = async () => {\r\n    if (!project.id) return;\r\n    \r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const response = await deliverablesApi.list(project.id);\r\n      setDeliverables(response.results || []);\r\n    } catch (err: any) {\r\n      setError('Failed to load deliverables');\r\n      console.error('Failed to load deliverables:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddDeliverable = () => {\r\n    setShowAddForm(true);\r\n  };\r\n\r\n  const handleSaveDeliverable = async (deliverableData: Partial<Deliverable>) => {\r\n    if (!project.id) return;\r\n\r\n    try {\r\n      await deliverablesApi.create({\r\n        project: project.id,\r\n        ...deliverableData\r\n      });\r\n      await loadDeliverables();\r\n      setShowAddForm(false);\r\n    } catch (err: any) {\r\n      setError('Failed to create deliverable');\r\n    }\r\n  };\r\n\r\n  const handleUpdateDeliverable = async (id: number, deliverableData: Partial<Deliverable>) => {\r\n    try {\r\n      await deliverablesApi.update(id, deliverableData);\r\n      await loadDeliverables();\r\n      setEditingId(null);\r\n    } catch (err: any) {\r\n      setError('Failed to update deliverable');\r\n    }\r\n  };\r\n\r\n  const handleDeleteDeliverable = async (id: number) => {\r\n    if (!confirm('Are you sure you want to delete this deliverable?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deliverablesApi.delete(id);\r\n      await loadDeliverables();\r\n    } catch (err: any) {\r\n      setError('Failed to delete deliverable');\r\n    }\r\n  };\r\n\r\n  const handleDragStart = (index: number) => {\r\n    setDraggedIndex(index);\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent, index: number) => {\r\n    e.preventDefault();\r\n    setDragOverIndex(index);\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setDragOverIndex(null);\r\n  };\r\n\r\n  const handleDrop = async (e: React.DragEvent, dropIndex: number) => {\r\n    e.preventDefault();\r\n    \r\n    if (draggedIndex === null || draggedIndex === dropIndex) {\r\n      setDraggedIndex(null);\r\n      setDragOverIndex(null);\r\n      return;\r\n    }\r\n\r\n    const newDeliverables = [...deliverables];\r\n    const [draggedItem] = newDeliverables.splice(draggedIndex, 1);\r\n    newDeliverables.splice(dropIndex, 0, draggedItem);\r\n\r\n    // Optimistically update UI\r\n    setDeliverables(newDeliverables);\r\n    setDraggedIndex(null);\r\n    setDragOverIndex(null);\r\n\r\n    // Update sort order on backend\r\n    try {\r\n      const deliverableIds = newDeliverables.map(d => d.id!);\r\n      await deliverablesApi.reorder(project.id!, deliverableIds);\r\n    } catch (err: any) {\r\n      setError('Failed to reorder deliverables');\r\n      // Reload on error to get correct order\r\n      await loadDeliverables();\r\n    }\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    setDraggedIndex(null);\r\n    setDragOverIndex(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"border-t border-[#3e3e42] pt-4\">\r\n      <div className=\"flex justify-between items-center mb-2\">\r\n        <h3 className=\"text-base font-semibold text-[#cccccc]\">Deliverables</h3>\r\n        <button\r\n          onClick={handleAddDeliverable}\r\n          className=\"px-2 py-0.5 text-xs rounded border bg-[#3e3e42] border-[#3e3e42] text-[#cccccc] hover:bg-[#4e4e52] hover:text-[#cccccc] transition-colors\"\r\n        >\r\n          + Add Deliverable\r\n        </button>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"mb-2 p-2 bg-red-500/20 border border-red-500/50 rounded text-red-400 text-xs\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-4 text-[#969696] text-sm\">Loading deliverables...</div>\r\n      ) : deliverables.length === 0 && !showAddForm ? (\r\n        <div className=\"text-center py-8\">\r\n          <div className=\"text-[#969696] text-sm\">No deliverables yet</div>\r\n          <div className=\"text-[#969696] text-xs mt-1\">Click \"Add Deliverable\" to get started</div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-1\">\r\n          {deliverables.map((deliverable, index) => (\r\n            <DeliverableRow\r\n              key={deliverable.id}\r\n              deliverable={deliverable}\r\n              index={index}\r\n              editing={editingId === deliverable.id}\r\n              isDragged={draggedIndex === index}\r\n              isDraggedOver={dragOverIndex === index}\r\n              onEdit={() => setEditingId(deliverable.id!)}\r\n              onSave={(data) => handleUpdateDeliverable(deliverable.id!, data)}\r\n              onCancel={() => setEditingId(null)}\r\n              onDelete={() => handleDeleteDeliverable(deliverable.id!)}\r\n              onDragStart={() => handleDragStart(index)}\r\n              onDragOver={(e) => handleDragOver(e, index)}\r\n              onDragLeave={handleDragLeave}\r\n              onDrop={(e) => handleDrop(e, index)}\r\n              onDragEnd={handleDragEnd}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {showAddForm && (\r\n        <AddDeliverableForm\r\n          onSave={handleSaveDeliverable}\r\n          onCancel={() => setShowAddForm(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface DeliverableRowProps {\r\n  deliverable: Deliverable;\r\n  index: number;\r\n  editing: boolean;\r\n  isDragged: boolean;\r\n  isDraggedOver: boolean;\r\n  onEdit: () => void;\r\n  onSave: (data: Partial<Deliverable>) => void;\r\n  onCancel: () => void;\r\n  onDelete: () => void;\r\n  onDragStart: () => void;\r\n  onDragOver: (e: React.DragEvent) => void;\r\n  onDragLeave: () => void;\r\n  onDrop: (e: React.DragEvent) => void;\r\n  onDragEnd: () => void;\r\n}\r\n\r\nconst DeliverableRow: React.FC<DeliverableRowProps> = ({\r\n  deliverable,\r\n  index,\r\n  editing,\r\n  isDragged,\r\n  isDraggedOver,\r\n  onEdit,\r\n  onSave,\r\n  onCancel,\r\n  onDelete,\r\n  onDragStart,\r\n  onDragOver,\r\n  onDragLeave,\r\n  onDrop,\r\n  onDragEnd,\r\n}) => {\r\n  const [editData, setEditData] = useState({\r\n    percentage: deliverable.percentage,\r\n    description: deliverable.description || '',\r\n    date: deliverable.date,\r\n    notes: deliverable.notes || '',\r\n    isCompleted: deliverable.isCompleted || false,\r\n  });\r\n\r\n  // Update edit data when deliverable changes\r\n  useEffect(() => {\r\n    if (editing) {\r\n      setEditData({\r\n        percentage: deliverable.percentage,\r\n        description: deliverable.description || '',\r\n        date: deliverable.date,\r\n        notes: deliverable.notes || '',\r\n        isCompleted: deliverable.isCompleted || false,\r\n      });\r\n    }\r\n  }, [deliverable, editing]);\r\n\r\n  // Create the drag handle component (3-line horizontal grabber)\r\n  const DragHandle = () => (\r\n    <div \r\n      className=\"cursor-grab active:cursor-grabbing flex flex-col justify-center items-center w-4 h-4 mr-2\"\r\n      onMouseDown={onDragStart}\r\n    >\r\n      <div className=\"w-3 h-0.5 bg-[#969696] mb-0.5\"></div>\r\n      <div className=\"w-3 h-0.5 bg-[#969696] mb-0.5\"></div>\r\n      <div className=\"w-3 h-0.5 bg-[#969696]\"></div>\r\n    </div>\r\n  );\r\n\r\n  if (editing) {\r\n    return (\r\n      <div className=\"p-2 bg-[#3e3e42]/50 rounded border border-[#3e3e42]\">\r\n        <div className=\"grid grid-cols-6 gap-2 items-center text-xs mb-2\">\r\n          <div className=\"text-[#969696] font-medium w-4\"></div> {/* Drag handle space */}\r\n          <div className=\"text-[#969696] font-medium\">%</div>\r\n          <div className=\"text-[#969696] font-medium\">DESCRIPTION</div>\r\n          <div className=\"text-[#969696] font-medium\">DATE</div>\r\n          <div className=\"text-[#969696] font-medium\">NOTES</div>\r\n          <div className=\"text-[#969696] font-medium\">ACTIONS</div>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-6 gap-2 items-start\">\r\n          {/* Drag Handle - disabled during edit */}\r\n          <div className=\"w-4\"></div>\r\n\r\n          {/* Percentage Input */}\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            max=\"100\"\r\n            value={editData.percentage || ''}\r\n            onChange={(e) => setEditData({\r\n              ...editData,\r\n              percentage: e.target.value ? Number(e.target.value) : null\r\n            })}\r\n            placeholder=\"%\"\r\n            className=\"px-1 py-0.5 bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] text-xs [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield]\"\r\n          />\r\n\r\n          {/* Description Input */}\r\n          <input\r\n            type=\"text\"\r\n            value={editData.description}\r\n            onChange={(e) => setEditData({ ...editData, description: e.target.value })}\r\n            placeholder=\"Description\"\r\n            className=\"px-1 py-0.5 bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] text-xs\"\r\n          />\r\n\r\n          {/* Date Input with Remove Button */}\r\n          <div className=\"relative\">\r\n            <input\r\n              type=\"date\"\r\n              value={editData.date || ''}\r\n              onChange={(e) => setEditData({ ...editData, date: e.target.value || null })}\r\n              className=\"px-1 py-0.5 bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] text-xs w-full pr-5\"\r\n            />\r\n            {editData.date && (\r\n              <button\r\n                onClick={() => setEditData({ ...editData, date: null })}\r\n                className=\"absolute right-0.5 top-0 bottom-0 px-1 text-red-400 hover:text-red-300 text-xs\"\r\n              >\r\n                ×\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Notes Input */}\r\n          <input\r\n            type=\"text\"\r\n            value={editData.notes}\r\n            onChange={(e) => setEditData({ ...editData, notes: e.target.value })}\r\n            placeholder=\"Notes\"\r\n            className=\"px-1 py-0.5 bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] text-xs\"\r\n          />\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex gap-1\">\r\n            <button\r\n              onClick={() => onSave(editData)}\r\n              className=\"px-1 py-0.5 bg-[#007acc] text-white text-xs rounded hover:bg-[#005fa3] transition-colors\"\r\n            >\r\n              Save\r\n            </button>\r\n            <button\r\n              onClick={onCancel}\r\n              className=\"px-1 py-0.5 bg-transparent border border-[#3e3e42] text-[#969696] text-xs rounded hover:text-[#cccccc] hover:bg-[#3e3e42] transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Completion Checkbox */}\r\n        <div className=\"mt-2 flex items-center gap-2 ml-6\">\r\n          <input\r\n            type=\"checkbox\"\r\n            id={`completed-${deliverable.id}`}\r\n            checked={editData.isCompleted}\r\n            onChange={(e) => setEditData({ ...editData, isCompleted: e.target.checked })}\r\n            className=\"w-3 h-3\"\r\n          />\r\n          <label htmlFor={`completed-${deliverable.id}`} className=\"text-xs text-[#cccccc]\">\r\n            Mark as completed\r\n          </label>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={`flex items-center p-2 rounded text-xs transition-all ${\r\n        isDragged \r\n          ? 'opacity-50 transform scale-95' \r\n          : isDraggedOver \r\n            ? 'bg-[#007acc]/20 border border-[#007acc]/50' \r\n            : deliverable.isCompleted \r\n              ? 'bg-[#3e3e42]/20 border border-[#3e3e42]/50' \r\n              : 'bg-[#3e3e42]/30'\r\n      }`}\r\n      draggable={!editing}\r\n      onDragStart={onDragStart}\r\n      onDragOver={onDragOver}\r\n      onDragLeave={onDragLeave}\r\n      onDrop={onDrop}\r\n      onDragEnd={onDragEnd}\r\n    >\r\n      {/* Drag Handle */}\r\n      <DragHandle />\r\n\r\n      {/* Content Grid */}\r\n      <div className=\"grid grid-cols-4 gap-4 flex-1\">\r\n        <div className={`${deliverable.isCompleted ? 'text-[#969696] line-through' : 'text-[#cccccc]'}`}>\r\n          {deliverable.percentage !== null ? `${deliverable.percentage}%` : '-'}\r\n        </div>\r\n        <div className={`${deliverable.isCompleted ? 'text-[#969696] line-through' : 'text-[#cccccc]'}`}>\r\n          {deliverable.description || '-'}\r\n        </div>\r\n        <div className=\"text-[#969696]\">\r\n          {deliverable.date || '-'}\r\n        </div>\r\n        <div className=\"text-[#969696]\">\r\n          {deliverable.notes || '-'}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Action Buttons */}\r\n      <div className=\"flex gap-1 items-center ml-2\">\r\n        {deliverable.isCompleted && (\r\n          <span className=\"text-emerald-400 text-xs mr-1\">✓</span>\r\n        )}\r\n        <button\r\n          onClick={onEdit}\r\n          className=\"text-[#cccccc] hover:bg-[#3e3e42] px-1 py-0.5 rounded text-xs transition-colors\"\r\n        >\r\n          Edit\r\n        </button>\r\n        <button\r\n          onClick={onDelete}\r\n          className=\"text-red-400 hover:bg-red-500/20 px-1 py-0.5 rounded text-xs transition-colors\"\r\n        >\r\n          Del\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface AddDeliverableFormProps {\r\n  onSave: (data: Partial<Deliverable>) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst AddDeliverableForm: React.FC<AddDeliverableFormProps> = ({ onSave, onCancel }) => {\r\n  const [formData, setFormData] = useState({\r\n    percentage: null as number | null,\r\n    description: '',\r\n    date: null as string | null,\r\n    notes: '',\r\n  });\r\n\r\n  const handleSave = () => {\r\n    onSave(formData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-2 bg-[#3e3e42]/50 rounded border border-[#3e3e42] mt-2\">\r\n      <div className=\"grid grid-cols-6 gap-2 items-center text-xs mb-2\">\r\n        <div className=\"text-[#969696] font-medium w-4\"></div> {/* Drag handle space */}\r\n        <div className=\"text-[#969696] font-medium\">%</div>\r\n        <div className=\"text-[#969696] font-medium\">DESCRIPTION</div>\r\n        <div className=\"text-[#969696] font-medium\">DATE</div>\r\n        <div className=\"text-[#969696] font-medium\">NOTES</div>\r\n        <div className=\"text-[#969696] font-medium\">ACTIONS</div>\r\n      </div>\r\n      \r\n      <div className=\"grid grid-cols-6 gap-2 items-center\">\r\n        {/* Empty space for drag handle alignment */}\r\n        <div className=\"w-4\"></div>\r\n\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"100\"\r\n          value={formData.percentage || ''}\r\n          onChange={(e) => setFormData({\r\n            ...formData,\r\n            percentage: e.target.value ? Number(e.target.value) : null\r\n          })}\r\n          placeholder=\"% (optional)\"\r\n          className=\"px-1 py-0.5 bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] text-xs [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield]\"\r\n        />\r\n        \r\n        <input\r\n          type=\"text\"\r\n          value={formData.description}\r\n          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n          placeholder=\"Description (optional)\"\r\n          className=\"px-1 py-0.5 bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] text-xs\"\r\n        />\r\n        \r\n        <input\r\n          type=\"date\"\r\n          value={formData.date || ''}\r\n          onChange={(e) => setFormData({ ...formData, date: e.target.value || null })}\r\n          className=\"px-1 py-0.5 bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] text-xs\"\r\n        />\r\n        \r\n        <input\r\n          type=\"text\"\r\n          value={formData.notes}\r\n          onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\r\n          placeholder=\"Notes (optional)\"\r\n          className=\"px-1 py-0.5 bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] text-xs\"\r\n        />\r\n        \r\n        <div className=\"flex gap-1\">\r\n          <button\r\n            onClick={handleSave}\r\n            className=\"px-1 py-0.5 bg-[#007acc] text-white text-xs rounded hover:bg-[#005fa3] transition-colors\"\r\n          >\r\n            Add\r\n          </button>\r\n          <button\r\n            onClick={onCancel}\r\n            className=\"px-1 py-0.5 bg-transparent border border-[#3e3e42] text-[#969696] text-xs rounded hover:text-[#cccccc] hover:bg-[#3e3e42] transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeliverablesSection;"],"names":["DeliverablesSection","project","deliverables","setDeliverables","useState","showAddForm","setShowAddForm","editingId","setEditingId","loading","setLoading","error","setError","draggedIndex","setDraggedIndex","dragOverIndex","setDragOverIndex","useEffect","loadDeliverables","response","deliverablesApi","err","handleAddDeliverable","handleSaveDeliverable","deliverableData","handleUpdateDeliverable","id","handleDeleteDeliverable","handleDragStart","index","handleDragOver","e","handleDragLeave","handleDrop","dropIndex","newDeliverables","draggedItem","deliverableIds","d","handleDragEnd","jsxs","jsx","deliverable","DeliverableRow","data","AddDeliverableForm","editing","isDragged","isDraggedOver","onEdit","onSave","onCancel","onDelete","onDragStart","onDragOver","onDragLeave","onDrop","onDragEnd","editData","setEditData","DragHandle","formData","setFormData","handleSave"],"mappings":"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"}
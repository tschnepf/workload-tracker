import{j as e}from"./query.D2_a4YYZ.js";import{r}from"./react-vendor.BaVwoRKI.js";import{L as ze,u as Ie,b as Fe}from"./router.BYkwE9TY.js";import{s as he,d as be,b as M,p as X,S as $e}from"./api.BBwiE9lX.js";import{L as Me,C as ge}from"./Card.DBbmFfHk.js";import{B as fe}from"./Button.B1aGBMaa.js";import{I as re}from"./Input.CAfEA-5q.js";const ne=({selectedSkills:b,onSkillsChange:j,skillType:f="all",placeholder:y="Add skills...",className:c="w-full px-2 py-1 text-xs bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none"})=>{const[o,w]=r.useState(""),[v,g]=r.useState([]),[L,m]=r.useState(!1),[N,I]=r.useState(!1),[P,E]=r.useState(-1),A=async l=>{if(l.length<2){g([]),m(!1);return}try{const h=(await he.list({search:l})).results.filter(T=>!b.some(H=>H.skillTagName===T.name)).slice(0,5);g(h),m(h.length>0),E(-1)}catch(d){console.error("Error searching skills:",d),g([]),m(!1)}};r.useEffect(()=>{const l=setTimeout(()=>{A(o)},300);return()=>clearTimeout(l)},[o,b]);const B=l=>{const d={id:0,person:0,skillTagId:l.id,skillTagName:l.name,skillType:f==="all"?"strength":f,proficiencyLevel:"beginner",notes:"",lastUsed:null,createdAt:"",updatedAt:""};j([...b,d]),w(""),m(!1),E(-1)},D=l=>{j(b.filter(d=>d.skillTagName!==l.skillTagName))},n=async l=>{if(!(!l.trim()||N)){I(!0);try{const d=await he.create({name:l.trim(),category:"",description:""}),h={id:0,person:0,skillTagId:d.id,skillTagName:d.name,skillType:f==="all"?"strength":f,proficiencyLevel:"beginner",notes:"",lastUsed:null,createdAt:"",updatedAt:""};j([...b,h]),w(""),m(!1),E(-1)}catch(d){console.error("Failed to create new skill:",d)}finally{I(!1)}}},x=l=>{const d=v.length+(o.length>=2&&!v.some(h=>h.name.toLowerCase()===o.trim().toLowerCase())?1:0);if(l.key==="ArrowDown")l.preventDefault(),(L||o.length>=2)&&E(h=>h<d-1?h+1:h);else if(l.key==="ArrowUp")l.preventDefault(),(L||o.length>=2)&&E(h=>h>-1?h-1:-1);else if(l.key==="Enter")l.preventDefault(),P>=0&&P<v.length?B(v[P]):P===v.length&&o.length>=2&&n(o.trim());else if(l.key==="Escape")m(!1),E(-1);else if(l.key==="Tab"&&o.trim()){l.preventDefault();const h=v.find(T=>T.name.toLowerCase()===o.trim().toLowerCase());h?B(h):n(o.trim())}},u=l=>{switch(l){case"strength":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";case"development":return"bg-amber-500/20 text-amber-400 border-amber-500/30";case"learning":return"bg-blue-500/20 text-blue-400 border-blue-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:y,value:o,onChange:l=>w(l.target.value),onKeyDown:x,disabled:N,className:`${c} ${N?"opacity-50 cursor-wait":""}`}),L&&v.length>0||o.length>=2&&!N?e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-50 max-h-32 overflow-y-auto",children:[v.map((l,d)=>e.jsxs("button",{onClick:()=>B(l),className:`w-full text-left px-2 py-1 text-xs hover:bg-[#3e3e42] transition-colors text-[#cccccc] border-b border-[#3e3e42] last:border-b-0 ${P===d?"bg-[#007acc]/30 border-[#007acc]":""}`,children:[e.jsx("div",{className:"font-medium",children:l.name}),l.category&&e.jsx("div",{className:"text-[#969696]",children:l.category})]},l.id)),o.length>=2&&!v.some(l=>l.name.toLowerCase()===o.trim().toLowerCase())&&e.jsx("button",{onClick:()=>n(o.trim()),className:`w-full text-left px-2 py-1 text-xs hover:bg-[#3e3e42] transition-colors text-[#969696] border-t border-[#3e3e42] bg-[#3e3e42]/30 ${P===v.length?"bg-[#007acc]/30 border-[#007acc]":""}`,disabled:N,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:['+ Create "',o.trim(),'"']}),e.jsx("span",{className:"text-xs opacity-75",children:"(Enter/Tab)"})]})})]}):null]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:b.map((l,d)=>e.jsxs("div",{className:`px-2 py-1 rounded-full border text-xs font-medium flex items-center gap-1 ${u(l.skillType)}`,children:[l.skillTagName,e.jsx("button",{onClick:()=>D(l),className:"hover:opacity-80 transition-opacity",children:"Ã—"})]},`${l.skillTagName}-${d}`))})]})},Ve=()=>{const[b,j]=r.useState([]),[f,y]=r.useState([]),[c,o]=r.useState(null),[w,v]=r.useState(""),[g,L]=r.useState([]),[m,N]=r.useState([]),[I,P]=r.useState("name"),[E,A]=r.useState(-1),[B,D]=r.useState(!0),[n,x]=r.useState(null),[u,l]=r.useState(!1),[d,h]=r.useState(new Set),[T,H]=r.useState(""),[ee,ce]=r.useState([]),[R,te]=r.useState(!1),[V,se]=r.useState(null),[k,oe]=r.useState({strengths:[],development:[],learning:[]}),[S,F]=r.useState(null),[C,O]=r.useState(!1),[K,Y]=r.useState(!1),[ie,q]=r.useState(!1),[ve,ae]=r.useState(!1),[G,de]=r.useState(!1),[Z,me]=r.useState(!1),je=[{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"},{value:"expert",label:"Expert"}],Ne=["Engineer","Senior Engineer","Lead Engineer","Principal Engineer","Designer","Senior Designer","Design Lead","Product Manager","Senior Product Manager","Project Manager","Program Manager","QA Engineer","DevOps Engineer","Data Scientist","Data Analyst","Marketing Specialist","Sales Representative","Operations Manager","HR Specialist","Consultant","Contractor","Intern"];r.useEffect(()=>{pe(),xe()},[]);const xe=async()=>{try{const t=await be.listAll();y(t)}catch(t){console.error("Error loading departments:",t)}};r.useEffect(()=>{c?.id&&le(c.id)},[c]),r.useEffect(()=>{const t=s=>{const a=s.target;V&&!a.closest(".proficiency-dropdown")&&se(null),K&&!a.closest(".gear-menu")&&Y(!1),G&&!a.closest(".department-filter")&&de(!1),Z&&!a.closest(".location-filter")&&me(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[V,K,G,Z]);const pe=async()=>{try{D(!0);const t=await M.listAll();j(t),t.length>0&&!c&&(o(t[0]),A(0),F({...t[0]}))}catch{x("Failed to load people")}finally{D(!1)}},le=async t=>{try{const a=(await X.list({person:t})).results||[];ce(a);const i={strengths:a.filter(p=>p.skillType==="strength"),development:a.filter(p=>p.skillType==="development"),learning:a.filter(p=>p.skillType==="learning")};oe(i)}catch(s){console.error("Failed to load person skills:",s)}},ye=(t,s)=>{o(t),A(s),F({...t})},U=(t,s)=>{S&&F(a=>({...a,[t]:s}))},Q=async t=>{if(!(!c?.id||!S||C))try{O(!0),x(null);const s={[t]:S[t]};t==="weeklyCapacity"&&(s.weeklyCapacity=Number(S.weeklyCapacity)||36),await M.update(c.id,s),o(a=>({...a,...s})),j(a=>a.map(i=>i.id===c.id?{...i,...s}:i))}catch(s){x(`Failed to update ${t}: ${s.message}`),F({...c})}finally{O(!1)}},we=()=>{q(!0),Y(!1)},ue=async()=>{if(!c?.id||!S?.name?.trim()){q(!1);return}try{O(!0),await M.update(c.id,{name:S.name.trim()}),o(t=>({...t,name:S.name.trim()})),j(t=>t.map(s=>s.id===c.id?{...s,name:S.name.trim()}:s)),q(!1)}catch(t){x(`Failed to update name: ${t.message}`)}finally{O(!1)}},ke=()=>{c&&F(t=>({...t,name:c.name})),q(!1)},Se=async()=>{if(c?.id)try{O(!0),await M.delete(c.id);const t=b.filter(s=>s.id!==c.id);if(j(t),t.length>0){const s=Math.min(E,t.length-1);o(t[s]),A(s),F({...t[s]})}else o(null),A(-1),F(null);ae(!1),Y(!1)}catch(t){x(`Failed to delete person: ${t.message}`)}finally{O(!1)}},Ce=()=>{te(!0)},Le=async()=>{if(c?.id)try{const t=[...k.strengths,...k.development,...k.learning];for(const s of ee)s.id&&await X.delete(s.id);for(const s of t){if(!s.skillTagId)continue;const a={person:c.id,skillTagId:s.skillTagId,skillType:s.skillType,proficiencyLevel:s.proficiencyLevel||"beginner",notes:s.notes||""};await X.create(a)}await le(c.id),te(!1)}catch{x("Failed to update skills")}},De=()=>{c?.id&&le(c.id),te(!1)},J=(t,s)=>{oe(a=>({...a,[t]:s}))},Te=(t,s)=>{if(R)return;const a=`${t.skillTagName}-${s}`;se(V===a?null:a)},Pe=async(t,s,a)=>{if(c?.id){try{const i=s==="strengths"?"strength":s.slice(0,-1),p=ee.find($=>$.skillTagName===t.skillTagName&&$.skillType===i);if(p?.id){await X.update(p.id,{proficiencyLevel:a});const $=k[s].map(z=>z.skillTagName===t.skillTagName?{...z,proficiencyLevel:a}:z);J(s,$);const _=ee.map(z=>z.id===p.id?{...z,proficiencyLevel:a}:z);ce(_)}}catch(i){console.error("Failed to update proficiency level:",i),x("Failed to update skill proficiency")}se(null)}},Ee=async()=>{if(!(!T||d.size===0))try{D(!0),x(null);const t=Array.from(d).map(a=>{const i={department:T==="unassigned"?null:parseInt(T)};return M.update(a,i)});await Promise.all(t),await pe(),await xe(),h(new Set),H("");const s=T==="unassigned"?"removed from departments":f.find(a=>a.id?.toString()===T)?.name||"unknown department"}catch(t){x(`Failed to update department assignments: ${t.message}`)}finally{D(!1)}},Ae=Array.from(new Set(b.map(t=>t.location?.trim()).filter(t=>t&&t!==""))).sort(),W=b.filter(t=>{const s=!w||t.name?.toLowerCase().includes(w.toLowerCase())||t.role?.toLowerCase().includes(w.toLowerCase())||t.departmentName?.toLowerCase().includes(w.toLowerCase())||t.location?.toLowerCase().includes(w.toLowerCase())||t.notes?.toLowerCase().includes(w.toLowerCase()),a=g.length===0||g.includes(t.department?.toString()||"")||g.includes("unassigned")&&!t.department,i=m.length===0||m.includes(t.location?.trim()||"")||m.includes("unspecified")&&(!t.location||t.location.trim()==="");return s&&a&&i}).sort((t,s)=>{switch(I){case"location":const a=t.location?.trim()||"zzz_unspecified",i=s.location?.trim()||"zzz_unspecified";return a.localeCompare(i);case"department":const p=t.departmentName||"zzz_unassigned",$=s.departmentName||"zzz_unassigned";return p.localeCompare($);case"role":const _=t.role||"zzz_no_role",z=s.role||"zzz_no_role";return _.localeCompare(z);case"name":default:return t.name.localeCompare(s.name)}});return r.useEffect(()=>{W.length>0&&!c&&(o(W[0]),A(0),F({...W[0]}))},[W,c]),B?e.jsx("div",{className:"min-h-screen bg-[#1e1e1e] flex items-center justify-center",children:e.jsx("div",{className:"text-[#969696]",children:"Loading people..."})}):e.jsxs("div",{className:"min-h-screen bg-[#1e1e1e] flex",children:[e.jsx($e,{}),e.jsxs("div",{className:"flex-1 flex h-screen bg-[#1e1e1e]",children:[e.jsxs("div",{className:"w-1/2 border-r border-[#3e3e42] flex flex-col min-w-0",children:[e.jsxs("div",{className:"p-3 border-b border-[#3e3e42]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h1",{className:"text-lg font-semibold text-[#cccccc]",children:"People"}),e.jsx(ze,{to:"/people/new",children:e.jsx("button",{className:"px-2 py-0.5 text-xs rounded border bg-[#3e3e42] border-[#3e3e42] text-[#cccccc] hover:bg-[#4e4e52] hover:text-[#cccccc] transition-colors",children:"+ New"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Search people (name, role, department, location, notes)",value:w,onChange:t=>v(t.target.value),className:"w-full px-3 py-1.5 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none"}),e.jsxs("div",{className:"department-filter relative",children:[e.jsxs("div",{onClick:()=>de(!G),className:"w-full px-3 py-1.5 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] min-h-[32px] flex flex-wrap items-center gap-1 cursor-pointer hover:border-[#007acc] focus:border-[#007acc]",children:[g.length===0?e.jsx("span",{className:"text-[#969696]",children:"All Departments"}):e.jsxs(e.Fragment,{children:[g.map((t,s)=>{const a=f.find(p=>p.id?.toString()===t),i=t==="unassigned"?"Not Assigned":a?.name||"Unknown";return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-[#007acc]/20 text-[#007acc] rounded text-xs border border-[#007acc]/30",children:[i,e.jsx("button",{onClick:p=>{p.stopPropagation(),L($=>$.filter(_=>_!==t))},className:"hover:text-[#007acc] hover:bg-[#007acc]/30 rounded-full w-3 h-3 flex items-center justify-center",children:"Ã—"})]},s)}),e.jsx("button",{onClick:t=>{t.stopPropagation(),L([])},className:"text-xs text-[#969696] hover:text-[#cccccc] ml-1",children:"Clear All"})]}),e.jsx("svg",{className:"ml-auto w-4 h-4 text-[#969696]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),G&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-40 max-h-40 overflow-y-auto",children:[e.jsxs("button",{onClick:()=>{g.includes("unassigned")||L(t=>[...t,"unassigned"])},className:`w-full text-left px-3 py-2 text-sm hover:bg-[#3e3e42] transition-colors ${g.includes("unassigned")?"bg-[#007acc]/20 text-[#007acc]":"text-[#cccccc]"}`,disabled:g.includes("unassigned"),children:["Not Assigned (",b.filter(t=>!t.department).length,")"]}),f.map(t=>e.jsxs("button",{onClick:()=>{const s=t.id?.toString()||"";g.includes(s)||L(a=>[...a,s])},className:`w-full text-left px-3 py-2 text-sm hover:bg-[#3e3e42] transition-colors ${g.includes(t.id?.toString()||"")?"bg-[#007acc]/20 text-[#007acc]":"text-[#cccccc]"}`,disabled:g.includes(t.id?.toString()||""),children:[t.name," (",b.filter(s=>s.department===t.id).length,")"]},t.id))]})]}),e.jsxs("div",{className:"location-filter relative",children:[e.jsxs("div",{onClick:()=>me(!Z),className:"w-full px-3 py-1.5 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] min-h-[32px] flex flex-wrap items-center gap-1 cursor-pointer hover:border-[#007acc] focus:border-[#007acc]",children:[m.length===0?e.jsx("span",{className:"text-[#969696]",children:"All Locations"}):e.jsxs(e.Fragment,{children:[m.map((t,s)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-[#007acc]/20 text-[#007acc] rounded text-xs border border-[#007acc]/30",children:[t==="unspecified"?"Not Specified":t,e.jsx("button",{onClick:a=>{a.stopPropagation(),N(i=>i.filter(p=>p!==t))},className:"hover:text-[#007acc] hover:bg-[#007acc]/30 rounded-full w-3 h-3 flex items-center justify-center",children:"Ã—"})]},s)),e.jsx("button",{onClick:t=>{t.stopPropagation(),N([])},className:"text-xs text-[#969696] hover:text-[#cccccc] ml-1",children:"Clear All"})]}),e.jsx("svg",{className:"ml-auto w-4 h-4 text-[#969696]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),Z&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-40 max-h-40 overflow-y-auto",children:[e.jsxs("button",{onClick:()=>{m.includes("unspecified")||N(t=>[...t,"unspecified"])},className:`w-full text-left px-3 py-2 text-sm hover:bg-[#3e3e42] transition-colors ${m.includes("unspecified")?"bg-[#007acc]/20 text-[#007acc]":"text-[#cccccc]"}`,disabled:m.includes("unspecified"),children:["Not Specified (",b.filter(t=>!t.location||t.location.trim()==="").length,")"]}),Ae.map(t=>e.jsxs("button",{onClick:()=>{m.includes(t)||N(s=>[...s,t])},className:`w-full text-left px-3 py-2 text-sm hover:bg-[#3e3e42] transition-colors ${m.includes(t)?"bg-[#007acc]/20 text-[#007acc]":"text-[#cccccc]"}`,disabled:m.includes(t),children:[t," (",b.filter(s=>s.location?.trim()===t).length,")"]},t))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-[#969696] whitespace-nowrap",children:"Sort by:"}),e.jsxs("select",{value:I,onChange:t=>P(t.target.value),className:"flex-1 px-3 py-1.5 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] focus:border-[#007acc] focus:outline-none",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"location",children:"Location"}),e.jsx("option",{value:"department",children:"Department"}),e.jsx("option",{value:"role",children:"Role"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>{l(!u),h(new Set)},className:`px-2 py-1 text-xs rounded border transition-colors ${u?"bg-[#007acc] border-[#007acc] text-white":"bg-[#3e3e42] border-[#3e3e42] text-[#cccccc] hover:bg-[#4e4e52]"}`,children:u?"Exit Bulk Mode":"Bulk Actions"}),u&&d.size>0&&e.jsxs("span",{className:"text-xs text-[#969696]",children:[d.size," selected"]})]})]})]}),n&&e.jsx("div",{className:"p-3 bg-red-500/20 border-b border-red-500/50",children:e.jsx("div",{className:"text-red-400 text-sm",children:n})}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-1.5 text-xs text-[#969696] font-medium border-b border-[#3e3e42] bg-[#2d2d30]",children:[u&&e.jsx("div",{className:"col-span-1",children:"SELECT"}),e.jsx("div",{className:"col-span-3",children:"NAME"}),e.jsx("div",{className:"col-span-2",children:"DEPARTMENT"}),e.jsx("div",{className:"col-span-2",children:"LOCATION"}),e.jsx("div",{className:"col-span-2",children:"CAPACITY"}),e.jsx("div",{className:u?"col-span-2":"col-span-3",children:"TOP SKILLS"})]}),e.jsx("div",{className:"overflow-y-auto h-full",children:W.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center text-[#969696]",children:[e.jsx("div",{className:"text-lg mb-2",children:"No people found"}),e.jsx("div",{className:"text-sm",children:"Try adjusting your search or create a new person"})]})}):W.map((t,s)=>e.jsxs("div",{onClick:u?void 0:()=>ye(t,s),className:`grid grid-cols-12 gap-2 px-2 py-1.5 text-sm border-b border-[#3e3e42] transition-colors focus:outline-none ${u?"hover:bg-[#3e3e42]/30":`cursor-pointer hover:bg-[#3e3e42]/50 ${c?.id===t.id?"bg-[#007acc]/20 border-[#007acc]":""}`}`,tabIndex:0,children:[u&&e.jsx("div",{className:"col-span-1 flex items-center",children:e.jsx("input",{type:"checkbox",checked:d.has(t.id),onChange:a=>{const i=new Set(d);a.target.checked?i.add(t.id):i.delete(t.id),h(i)},className:"w-3 h-3 text-[#007acc] bg-[#3e3e42] border-[#3e3e42] rounded focus:ring-[#007acc] focus:ring-2"})}),e.jsx("div",{className:"col-span-3 text-[#cccccc] font-medium",children:t.name}),e.jsx("div",{className:"col-span-2 text-[#969696] text-xs",children:t.departmentName||"None"}),e.jsx("div",{className:"col-span-2 text-[#969696] text-xs",children:t.location||"Not specified"}),e.jsxs("div",{className:"col-span-2 text-[#969696] text-xs",children:[t.weeklyCapacity||36,"h/week"]}),e.jsx("div",{className:`${u?"col-span-2":"col-span-3"} flex flex-wrap gap-1`,children:e.jsx("span",{className:"text-[#969696] text-xs",children:"Skills..."})})]},t.id))})]}),u&&d.size>0&&e.jsx("div",{className:"p-3 border-t border-[#3e3e42] bg-[#2d2d30]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-[#cccccc] font-medium",children:["Assign ",d.size," people to:"]}),e.jsxs("select",{value:T,onChange:t=>H(t.target.value),className:"px-3 py-1.5 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] focus:border-[#007acc] focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Department..."}),e.jsx("option",{value:"unassigned",children:"Remove from Department"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("button",{onClick:Ee,disabled:!T,className:"px-3 py-1.5 text-sm rounded bg-[#007acc] text-white hover:bg-[#005fa3] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Assign"}),e.jsx("button",{onClick:()=>h(new Set),className:"px-3 py-1.5 text-sm rounded border border-[#3e3e42] text-[#969696] hover:text-[#cccccc] hover:bg-[#3e3e42] transition-colors",children:"Clear Selection"})]})})]}),e.jsx("div",{className:"w-1/2 flex flex-col bg-[#2d2d30] min-w-0",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-[#3e3e42]",children:e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[ie?e.jsxs("div",{className:"mb-2",children:[e.jsx("input",{type:"text",value:S?.name||"",onChange:t=>U("name",t.target.value),onKeyDown:t=>{t.key==="Enter"?ue():t.key==="Escape"&&ke()},onBlur:ue,disabled:C,className:"text-xl font-bold bg-[#3e3e42] border border-[#3e3e42] rounded px-2 py-1 text-[#cccccc] focus:outline-none focus:ring-1 focus:ring-[#007acc] focus:border-transparent disabled:opacity-50 w-full",autoFocus:!0}),e.jsx("div",{className:"text-xs text-[#969696] mt-1",children:"Press Enter to save, Escape to cancel"})]}):e.jsx("h2",{className:"text-xl font-bold text-[#cccccc] mb-2",children:c.name}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[#969696] text-xs mb-1",children:"Role:"}),e.jsxs("select",{value:S?.role||"",onChange:t=>{U("role",t.target.value),Q("role")},disabled:C,className:"w-full px-2 py-1 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] focus:outline-none focus:ring-1 focus:ring-[#007acc] focus:border-transparent disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Role..."}),Ne.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[#969696] text-xs mb-1",children:"Weekly Capacity:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",min:"1",max:"80",value:S?.weeklyCapacity||36,onChange:t=>U("weeklyCapacity",parseInt(t.target.value)||36),onBlur:()=>Q("weeklyCapacity"),disabled:C,className:"w-16 px-2 py-1 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] focus:outline-none focus:ring-1 focus:ring-[#007acc] focus:border-transparent disabled:opacity-50 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),e.jsx("span",{className:"text-[#969696]",children:"hours/week"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[#969696] text-xs mb-1",children:"Department:"}),e.jsxs("select",{value:S?.department||"",onChange:t=>{const s=t.target.value?parseInt(t.target.value):null;U("department",s);const a=f.find(i=>i.id===s);U("departmentName",a?.name||""),Q("department")},disabled:C,className:"w-full px-2 py-1 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] focus:outline-none focus:ring-1 focus:ring-[#007acc] focus:border-transparent disabled:opacity-50",children:[e.jsx("option",{value:"",children:"No Department"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[#969696] text-xs mb-1",children:"Location:"}),e.jsx("input",{type:"text",value:S?.location||"",onChange:t=>U("location",t.target.value),onBlur:()=>Q("location"),placeholder:"e.g., New York, NY or Remote",disabled:C,className:"w-full px-2 py-1 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:outline-none focus:ring-1 focus:ring-[#007acc] focus:border-transparent disabled:opacity-50"})]})]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[C&&e.jsxs("div",{className:"px-2 py-0.5 text-xs text-[#007acc] flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 border border-[#007acc] border-t-transparent rounded-full animate-spin"}),"Saving..."]}),e.jsxs("div",{className:"gear-menu relative",children:[e.jsx("button",{onClick:()=>Y(!K),disabled:C,className:"p-1 text-[#969696] hover:text-[#cccccc] hover:bg-[#3e3e42] rounded transition-colors disabled:opacity-50",title:"Person options",children:e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"})]})}),K&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-50",children:[e.jsxs("button",{onClick:we,disabled:C||ie,className:"w-full text-left px-3 py-2 text-sm text-[#cccccc] hover:bg-[#3e3e42] transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Edit Name"]}),e.jsx("div",{className:"border-t border-[#3e3e42]"}),e.jsxs("button",{onClick:()=>ae(!0),disabled:C,className:"w-full text-left px-3 py-2 text-sm text-red-400 hover:bg-red-500/20 transition-colors disabled:opacity-50 flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c-1 0 2 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),"Delete Person"]})]})]})]})]})}),ve&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-[#2d2d30] border border-[#3e3e42] rounded-lg p-6 max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#cccccc]",children:"Delete Person"}),e.jsx("p",{className:"text-sm text-[#969696]",children:"This action cannot be undone"})]})]}),e.jsxs("p",{className:"text-[#cccccc] mb-6",children:["Are you sure you want to delete ",e.jsx("strong",{children:c.name}),"? This will permanently remove all their data, assignments, and skills."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>ae(!1),disabled:C,className:"px-4 py-2 text-sm border border-[#3e3e42] text-[#cccccc] hover:bg-[#3e3e42] rounded transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:Se,disabled:C,className:"px-4 py-2 text-sm bg-red-600 hover:bg-red-700 text-white rounded transition-colors disabled:opacity-50 flex items-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):"Delete Person"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#cccccc]",children:"Skills & Expertise"}),e.jsx("div",{className:"flex gap-2",children:R?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Le,className:"px-2 py-0.5 text-xs rounded border bg-[#007acc] border-[#007acc] text-white hover:bg-[#005fa3] transition-colors",children:"Save Skills"}),e.jsx("button",{onClick:De,className:"px-2 py-0.5 text-xs rounded border bg-transparent border-[#3e3e42] text-[#969696] hover:text-[#cccccc] hover:bg-[#3e3e42] transition-colors",children:"Cancel"})]}):e.jsx("button",{onClick:Ce,className:"px-2 py-0.5 text-xs rounded border bg-[#007acc] border-[#007acc] text-white hover:bg-[#005fa3] transition-colors",children:"Edit Skills"})})]}),e.jsxs("div",{className:"bg-[#3e3e42]/50 p-4 rounded-lg border border-[#3e3e42]",children:[e.jsxs("h4",{className:"text-sm font-medium text-[#cccccc] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-400 rounded-full"}),"Strengths"]}),R?e.jsx(ne,{selectedSkills:k.strengths,onSkillsChange:t=>J("strengths",t),skillType:"strength",placeholder:"Add strengths...",className:"w-full px-3 py-2 text-sm bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none"}):e.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.strengths.map((t,s)=>{const a=`${t.skillTagName}-strengths`,i=V===a;return e.jsxs("div",{className:"relative",children:[e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 flex items-center gap-1",children:[t.skillTagName,e.jsxs("span",{className:`ml-1 opacity-75 ${R?"":"cursor-pointer hover:opacity-100 hover:underline"}`,onClick:()=>Te(t,"strengths"),children:["(",t.proficiencyLevel,")"]})]}),i&&!R&&e.jsx("div",{className:"proficiency-dropdown absolute top-full left-0 mt-1 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-50 min-w-32",children:je.map(p=>e.jsx("button",{onClick:()=>Pe(t,"strengths",p.value),className:`w-full text-left px-3 py-1 text-xs hover:bg-[#3e3e42] transition-colors border-b border-[#3e3e42] last:border-b-0 ${t.proficiencyLevel===p.value?"bg-emerald-500/20 text-emerald-400":"text-[#cccccc]"}`,children:p.label},p.value))})]},s)}),k.strengths.length===0&&e.jsx("span",{className:"text-[#969696] text-sm",children:"No strengths listed"})]})]}),e.jsxs("div",{className:"bg-[#3e3e42]/50 p-4 rounded-lg border border-[#3e3e42]",children:[e.jsxs("h4",{className:"text-sm font-medium text-[#cccccc] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-amber-400 rounded-full"}),"Areas for Improvement"]}),R?e.jsx(ne,{selectedSkills:k.development,onSkillsChange:t=>J("development",t),skillType:"development",placeholder:"Add development areas...",className:"w-full px-3 py-2 text-sm bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none"}):e.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.development.map((t,s)=>(`${t.skillTagName}`,e.jsx("span",{className:"px-3 py-1 rounded-full text-xs bg-amber-500/20 text-amber-400 border border-amber-500/30",children:t.skillTagName},s))),k.development.length===0&&e.jsx("span",{className:"text-[#969696] text-sm",children:"No development areas listed"})]})]}),e.jsxs("div",{className:"bg-[#3e3e42]/50 p-4 rounded-lg border border-[#3e3e42]",children:[e.jsxs("h4",{className:"text-sm font-medium text-[#cccccc] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"Currently Learning"]}),R?e.jsx(ne,{selectedSkills:k.learning,onSkillsChange:t=>J("learning",t),skillType:"learning",placeholder:"Add learning goals...",className:"w-full px-3 py-2 text-sm bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none"}):e.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.learning.map((t,s)=>(`${t.skillTagName}`,e.jsx("span",{className:"px-3 py-1 rounded-full text-xs bg-blue-500/20 text-blue-400 border border-blue-500/30",children:t.skillTagName},s))),k.learning.length===0&&e.jsx("span",{className:"text-[#969696] text-sm",children:"No learning goals listed"})]})]})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-[#969696]",children:[e.jsx("div",{className:"text-lg mb-2",children:"Select a person"}),e.jsx("div",{className:"text-sm",children:"Choose a person from the list to view details"})]})})})]})]})},Ke=()=>{const b=Ie(),{id:j}=Fe(),f=!!j,[y,c]=r.useState({name:"",weeklyCapacity:36,department:null,location:""}),[o,w]=r.useState([]),[v,g]=r.useState(!1),[L,m]=r.useState(null),[N,I]=r.useState({});r.useEffect(()=>{P(),f&&j&&E(parseInt(j))},[f,j]);const P=async()=>{try{const n=await be.list();w(n.results||[])}catch(n){console.error("Error loading departments:",n)}},E=async n=>{try{g(!0);const x=await M.get(n);c({name:x.name,weeklyCapacity:x.weeklyCapacity||36,department:x.department||null,location:x.location||""})}catch(x){m(x.message||"Failed to load person")}finally{g(!1)}},A=()=>{const n={};return y.name.trim()||(n.name="Name is required"),(y.weeklyCapacity<1||y.weeklyCapacity>80)&&(n.weeklyCapacity="Weekly capacity must be between 1 and 80 hours"),I(n),Object.keys(n).length===0},B=async n=>{if(n.preventDefault(),!!A())try{g(!0),m(null),f&&j?await M.update(parseInt(j),y):await M.create(y),b("/people")}catch(x){m(x.message||`Failed to ${f?"update":"create"} person`)}finally{g(!1)}},D=(n,x)=>{c(u=>({...u,[n]:x})),N[n]&&I(u=>({...u,[n]:""}))};return e.jsx(Me,{children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#cccccc]",children:f?"Edit Person":"Add New Person"}),e.jsx("p",{className:"text-[#969696] mt-1",children:f?"Update team member information":"Add a new team member to track their workload"})]}),L&&e.jsx(ge,{className:"bg-red-500/20 border-red-500/50 p-4 mb-6",children:e.jsx("div",{className:"text-red-400",children:L})}),e.jsx(ge,{className:"bg-[#2d2d30] border-[#3e3e42] p-6",children:e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(re,{label:"Full Name",name:"name",value:y.name,onChange:n=>D("name",n.target.value),placeholder:"Enter full name",required:!0,error:N.name,className:"bg-[#3e3e42] border-[#3e3e42] text-[#cccccc]"}),e.jsx("p",{className:"text-[#969696] text-sm mt-1",children:"This will be displayed in reports and assignments"})]}),e.jsxs("div",{children:[e.jsx(re,{label:"Weekly Capacity (hours)",name:"weeklyCapacity",type:"number",value:y.weeklyCapacity,onChange:n=>D("weeklyCapacity",parseInt(n.target.value)||0),placeholder:"36",min:"1",max:"80",required:!0,error:N.weeklyCapacity,className:"bg-[#3e3e42] border-[#3e3e42] text-[#cccccc]"}),e.jsx("p",{className:"text-[#969696] text-sm mt-1",children:"Typical full-time: 40h, Part-time: 20h, Contractor: 36h"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#cccccc] mb-2",children:"Department"}),e.jsxs("select",{value:y.department||"",onChange:n=>D("department",n.target.value?parseInt(n.target.value):null),className:"w-full px-3 py-2 bg-[#3e3e42] border border-[#3e3e42] rounded-md text-[#cccccc] focus:outline-none focus:ring-2 focus:ring-[#007acc] focus:border-transparent",disabled:v,children:[e.jsx("option",{value:"",children:"None Assigned"}),o.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),e.jsx("p",{className:"text-[#969696] text-sm mt-1",children:"Assign this person to a department for organizational tracking"})]}),e.jsxs("div",{children:[e.jsx(re,{label:"Location",name:"location",value:y.location,onChange:n=>D("location",n.target.value),placeholder:"e.g., New York, NY or Remote",className:"bg-[#3e3e42] border-[#3e3e42] text-[#cccccc]"}),e.jsx("p",{className:"text-[#969696] text-sm mt-1",children:"City and state, or indicate if remote. Leave blank if not specified."})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(fe,{type:"button",variant:"ghost",onClick:()=>b("/people"),disabled:v,children:"Cancel"}),e.jsx(fe,{type:"submit",variant:"primary",disabled:v,children:v?"Saving...":f?"Update Person":"Add Person"})]})]})})]})})};export{Ve as PeopleList,Ke as PersonForm};
//# sourceMappingURL=index.tWjhzuQb.js.map

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DeliverablesSection.BzesmPv2.js","assets/query.D2_a4YYZ.js","assets/react-vendor.BaVwoRKI.js","assets/api.BBwiE9lX.js","assets/router.BYkwE9TY.js"])))=>i.map(i=>d[i]);
import{u as ye,b as we,c as Se,j as e,_ as ct}from"./query.D2_a4YYZ.js";import{r as i,b as oe}from"./react-vendor.BaVwoRKI.js";import{L as Ne}from"./router.BYkwE9TY.js";import{u as nt}from"./useDebounce.lmyEQsFZ.js";import{e as ie,b as ke,f as lt,c as $,S as at}from"./api.BBwiE9lX.js";function ot(){const{data:d,isLoading:m,isFetching:p,error:b}=ye({queryKey:["projects"],queryFn:()=>ie.listAll(),staleTime:3e4}),w=m||p,S=b?b.message:null;return{projects:d||[],loading:w,error:S}}function it(){const d=we();return Se({mutationFn:({id:m,data:p})=>ie.update(m,p),onSuccess:(m,p)=>{d.setQueryData(["projects",p.id],m),d.invalidateQueries({queryKey:["projects"]})}})}function dt(){const d=we();return Se({mutationFn:m=>ie.delete(m),onSuccess:()=>{d.invalidateQueries({queryKey:["projects"]})}})}function ut(){const{data:d,isLoading:m,isFetching:p,error:b}=ye({queryKey:["people"],queryFn:()=>ke.listAll(),staleTime:3e4}),w=m||p,S=b?b.message:null;return{people:d||[],loading:w,error:S}}const xt=oe.lazy(()=>ct(()=>import("./DeliverablesSection.BzesmPv2.js"),__vite__mapDeps([0,1,2,3,4]))),ht=()=>e.jsx("div",{className:"border border-[#3e3e42] rounded-lg p-6 bg-[#2d2d30]",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#007acc]"}),e.jsx("div",{className:"text-[#969696]",children:"Loading deliverables..."})]})})}),mt=oe.memo(({assignment:d,isEditing:m,editData:p,roleSearchResults:b,onEdit:w,onDelete:S,onSave:o,onCancel:j,onRoleSearch:k,onRoleSelect:V,onHoursChange:C,getCurrentWeekHours:Y})=>m?e.jsx("div",{className:"p-3 bg-[#3e3e42]/50 rounded border border-[#3e3e42]",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[e.jsx("div",{className:"text-[#cccccc]",children:d.personName||"Unknown"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Role on project...",value:p.roleSearch,onChange:h=>k(h.target.value),className:"w-full px-2 py-1 text-xs bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none",autoFocus:!0}),b.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-50 max-h-32 overflow-y-auto",children:b.map(h=>e.jsx("button",{onClick:()=>V(h),className:"w-full text-left px-2 py-1 text-xs hover:bg-[#3e3e42] transition-colors text-[#cccccc] border-b border-[#3e3e42] last:border-b-0",children:h},h))})]}),e.jsx("div",{children:e.jsx("input",{type:"number",min:"0",max:"80",step:"0.5",placeholder:"Hours",value:p.currentWeekHours,onChange:h=>C(parseFloat(h.target.value)||0),className:"w-full px-2 py-1 text-xs bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield]"})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:o,className:"px-2 py-1 text-xs rounded border bg-[#007acc] border-[#007acc] text-white hover:bg-[#005fa3] transition-colors",children:"Save"}),e.jsx("button",{onClick:j,className:"px-2 py-1 text-xs rounded border bg-transparent border-[#3e3e42] text-[#969696] hover:text-[#cccccc] hover:bg-[#3e3e42] transition-colors",children:"Cancel"})]})]})}):e.jsxs("div",{className:"flex justify-between items-center p-2 bg-[#3e3e42]/30 rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[#cccccc]",children:d.personName||"Unknown"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[d.personSkills?.filter(h=>h.skillType==="strength").slice(0,3).map((h,I)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-emerald-500/20 text-emerald-400 border border-emerald-500/30",children:h.skillTagName},I)),d.personSkills?.filter(h=>h.skillType==="strength").length===0&&e.jsx("span",{className:"text-[#969696] text-xs",children:"No skills listed"})]})]}),e.jsx("div",{className:"text-[#969696]",children:d.roleOnProject||"Team Member"}),e.jsxs("div",{className:"text-[#969696]",children:[Y(d),"h"]})]})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:w,className:"text-xs px-1 py-0.5 rounded border bg-transparent border-transparent text-[#cccccc] hover:bg-[#3e3e42] hover:border-[#3e3e42] transition-colors",children:"Edit"}),e.jsx("button",{onClick:S,className:"text-xs px-1 py-0.5 rounded border bg-transparent border-transparent text-red-400 hover:bg-red-500/20 hover:border-red-500/30 transition-colors",children:"Delete"})]})]}));mt.displayName="AssignmentRow";const pt=oe.memo(({person:d,isSelected:m,onSelect:p})=>e.jsx("button",{onClick:p,role:"option","aria-selected":m,"aria-describedby":`person-${d.id}-details`,className:`w-full text-left px-2 py-2 text-xs hover:bg-[#3e3e42] transition-colors border-b border-[#3e3e42] last:border-b-0 ${m?"bg-[#3e3e42]":""}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-[#cccccc] font-medium",children:d.name}),e.jsx("div",{className:"text-[#969696] text-xs",children:d.role}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:d.hasSkillMatch&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-emerald-500/20 text-emerald-400 border border-emerald-500/30","aria-label":"This person has matching skills for your search",children:"âœ“ Skill Match"})})]}),e.jsxs("div",{className:"text-right ml-2",id:`person-${d.id}-details`,children:[e.jsxs("div",{className:"text-[#cccccc] text-xs font-medium",children:[d.availableHours?.toFixed(1)||"0","h available"]}),e.jsxs("div",{className:"text-[#969696] text-xs",children:[d.utilizationPercent?.toFixed(0)||"0","% utilized"]})]})]})},d.id));pt.displayName="PersonSearchResult";const bt=()=>{const{projects:d,loading:m,error:p}=ot(),{people:b}=ut(),w=dt(),S=it(),[o,j]=i.useState(null),[k,V]=i.useState("Show All"),[C,Y]=i.useState("name"),[h,I]=i.useState("asc"),[A,Ce]=i.useState(""),[D,H]=i.useState(-1),[de,P]=i.useState(null),[ue,L]=i.useState([]),[U,J]=i.useState(!1),[K,X]=i.useState({}),[f,De]=i.useState([]),[xe,G]=i.useState(!1),[g,E]=i.useState({personSearch:"",selectedPerson:null,roleOnProject:"",roleSearch:"",weeklyHours:{}}),[N,q]=i.useState([]),[B,R]=i.useState(-1),[he,Pe]=i.useState(new Map),[Ae,Ee]=i.useState(""),me=nt(g.personSearch,300),[Z,ee]=i.useState(null),[O,z]=i.useState({roleOnProject:"",currentWeekHours:0,roleSearch:""}),[te,He]=i.useState([]),[Q,v]=i.useState([]),Le=["active","active_ca","on_hold","completed","cancelled","active_no_deliverables","Show All"],Re=["active","active_ca","on_hold","completed","cancelled"];i.useEffect(()=>{P(p||null)},[p]);const pe=i.useCallback(()=>{const t=new Map;f.forEach(s=>{if(s.person&&s.personSkills){const r=s.person,c=t.get(r)||[],n=s.personSkills.filter(l=>l.skillType==="strength").map(l=>l.skillTagName?.toLowerCase()||"").filter(l=>l.length>0),a=[...new Set([...c,...n])];t.set(r,a)}}),Pe(t)},[f]);i.useEffect(()=>{f.length>0&&pe()},[f,pe]),i.useEffect(()=>{o?.id&&T(o.id)},[o]),i.useEffect(()=>{d.length>0&&Oe(d)},[d]);const Oe=async t=>{try{const s=performance.now(),r=t.map(l=>l.id).filter(l=>l!==void 0);if(r.length===0){X({});return}const c=await lt.bulkList(r),n={};Object.entries(c).forEach(([l,u])=>{n[parseInt(l)]=u}),X(n);const a=performance.now();console.log(`Bulk deliverables loaded in ${Math.round(a-s)}ms for ${r.length} projects`)}catch(s){console.error("Failed to load bulk deliverables:",s);const r={};t.forEach(c=>{c.id&&(r[c.id]=[])}),X(r)}},se=t=>{const s=K[t]||[],r=new Date;r.setHours(0,0,0,0);const c=s.filter(n=>n.date&&!n.isCompleted).filter(n=>{const[a,l,u]=n.date.split("-").map(Number),x=new Date(a,l-1,u);return x.setHours(0,0,0,0),x>=r}).sort((n,a)=>{const[l,u,x]=n.date.split("-").map(Number),[le,ae,_]=a.date.split("-").map(Number),st=new Date(l,u-1,x),rt=new Date(le,ae-1,_),je=st.getTime()-rt.getTime();return je!==0?je:(n.percentage||0)-(a.percentage||0)});return c.length>0?c[0]:null},ze=t=>{const s=[];if(t.date){const[r,c,n]=t.date.split("-").map(Number),a=new Date(r,c-1,n);s.push(a.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}return t.percentage!==null&&s.push(`${t.percentage}%`),t.description&&s.push(t.description),s.length>0?s.join(" â€¢ "):"-"},Te=t=>{const s=K[t]||[],r=new Date;return r.setHours(0,0,0,0),s.some(c=>{if(!c.date||c.isCompleted)return!1;const[n,a,l]=c.date.split("-").map(Number),u=new Date(n,a-1,l);return u.setHours(0,0,0,0),u>=r})},Me=t=>t==="Show All"?"Show All":t==="active_no_deliverables"?"Active - No Dates":t==="active_ca"?"Active CA":M(t),Fe=async t=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{if(await w.mutateAsync(t),o?.id===t){const s=d.filter(r=>r.id!==t);s.length>0?(j(s[0]),H(0)):(j(null),H(-1))}}catch{P("Failed to delete project")}},T=async t=>{try{const r=(await $.listAll()).filter(a=>a.project===t);De(r);const c=new Set;r.forEach(a=>{a.roleOnProject&&c.add(a.roleOnProject)}),b.forEach(a=>{a.role&&c.add(a.role)});const n=Array.from(c).sort();He(n)}catch(s){console.error("Failed to load project assignments:",s)}},We=async t=>{try{const s=new Date,r=s.getDay(),c=new Date(s);c.setDate(s.getDate()-r+(r===0?-6:1));const n=c.toISOString().split("T")[0],a=await ke.getPersonUtilization(t.id,n);return{availableHours:a.utilization.available_hours,utilizationPercent:Math.round(a.utilization.total_percentage),totalHours:a.utilization.allocated_hours}}catch(s){return console.error("Failed to calculate person availability:",s),{availableHours:0,utilizationPercent:0,totalHours:0}}},_e=i.useCallback((t,s=[])=>{if(s.length===0)return 0;const r=he.get(t.id)||[];return s.filter(n=>r.some(a=>a.includes(n.toLowerCase())||n.toLowerCase().includes(a))).length/s.length},[he]),$e=t=>{E(s=>({...s,personSearch:t})),R(-1)},be=async t=>{let s=b;t.length>0&&(s=b.filter(l=>l.name.toLowerCase().includes(t.toLowerCase())||l.role?.toLowerCase().includes(t.toLowerCase())));const c=["heat","lighting","hvac","autocad","python","design","mechanical","electrical"].filter(l=>t.toLowerCase().includes(l)),a=(await Promise.all(s.map(async l=>{const u=await We(l),x=_e({...l,...u},c);return{...l,...u,skillMatchScore:x,hasSkillMatch:x>0}}))).sort((l,u)=>l.skillMatchScore!==u.skillMatchScore?u.skillMatchScore-l.skillMatchScore:u.availableHours!==l.availableHours?u.availableHours-l.availableHours:l.name.localeCompare(u.name)).slice(0,5);q(a),Ee(`Found ${a.length} people matching your search. ${a.filter(l=>l.hasSkillMatch).length} with skill matches.`)};i.useEffect(()=>{b.length>0&&be(me)},[me,b]);const ge=t=>{E(s=>({...s,selectedPerson:t,personSearch:t.name})),q([]),R(-1)},Ie=t=>{t.key==="ArrowDown"?(t.preventDefault(),N.length>0&&R(s=>s<N.length-1?s+1:s)):t.key==="ArrowUp"?(t.preventDefault(),N.length>0&&R(s=>s>-1?s-1:-1)):t.key==="Enter"?(t.preventDefault(),B>=0&&B<N.length&&ge(N[B])):t.key==="Escape"&&(q([]),R(-1))},re=i.useCallback(t=>{if(!t||!f)return[];const r=f.filter(n=>n.person===t.id).flatMap(n=>n.personSkills||[]).filter(n=>n.skillType==="strength").map(n=>n.skillTagName?.toLowerCase()||""),c=[];return r.some(n=>n.includes("heat")||n.includes("hvac"))&&c.push("HVAC Engineer","Mechanical Designer","Heat Calc Specialist"),r.some(n=>n.includes("lighting")||n.includes("electrical"))&&c.push("Lighting Designer","Electrical Engineer","Photometric Specialist"),r.some(n=>n.includes("autocad")||n.includes("cad"))&&c.push("CAD Designer","Technical Drafter","Design Engineer"),r.some(n=>n.includes("python")||n.includes("programming"))&&c.push("Automation Engineer","Technical Developer","Data Analyst"),r.some(n=>n.includes("project")||n.includes("management"))&&c.push("Project Manager","Team Lead","Coordinator"),c},[f]),Ue=t=>{if(E(l=>({...l,roleSearch:t,roleOnProject:t})),t.length<1){v([]);return}const s=te.filter(l=>l.toLowerCase().includes(t.toLowerCase())),n=[...(g.selectedPerson?re(g.selectedPerson):[]).filter(l=>l.toLowerCase().includes(t.toLowerCase())),...s],a=Array.from(new Set(n)).slice(0,5);v(a)},Ke=t=>{E(s=>({...s,roleOnProject:t,roleSearch:t})),v([])},qe=()=>{G(!0),E({personSearch:"",selectedPerson:null,roleOnProject:"",roleSearch:"",weeklyHours:{}})},Be=async()=>{if(!(!o?.id||!g.selectedPerson?.id))try{const t=g.weeklyHours||{};if(Object.values(t).reduce((c,n)=>c+(n||0),0)>0){const c=new Date,n=c.getDay(),a=new Date(c);a.setDate(c.getDate()-n+(n===0?-6:1));const l=a.toISOString().split("T")[0],u=t[l]||0;if(u>0&&o?.id){const x=await fe(g.selectedPerson.id,o.id,l,u);L(x)}}const r={person:g.selectedPerson.id,project:o.id,roleOnProject:g.roleOnProject||"Team Member",weeklyHours:g.weeklyHours,startDate:new Date().toISOString().split("T")[0]};await $.create(r),await T(o.id),G(!1)}catch{P("Failed to create assignment")}},Qe=()=>{G(!1),L([]),E({personSearch:"",selectedPerson:null,roleOnProject:"",roleSearch:"",weeklyHours:{}}),q([]),v([])},ce=t=>{const s=new Date,r=s.getDay(),c=new Date(s);c.setDate(s.getDate()-r+(r===0?-6:1));const n=c.toISOString().split("T")[0];return t.weeklyHours?.[n]||0},Ve=i.useCallback(async t=>{if(confirm("Are you sure you want to remove this assignment?"))try{await $.delete(t),o?.id&&await T(o.id)}catch{P("Failed to delete assignment")}},[o?.id,T]),Ye=i.useCallback(t=>{ee(t.id);const s=ce(t),r=t.roleOnProject||"";z({roleOnProject:r,currentWeekHours:s,roleSearch:r}),v([])},[ce]),Je=i.useCallback(t=>{if(z(x=>({...x,roleSearch:t,roleOnProject:t})),t.length<1){v([]);return}const s=te.filter(x=>x.toLowerCase().includes(t.toLowerCase())),r=f.find(x=>x.id===Z),c=r?b.find(x=>x.id===r.person):null,l=[...(c?re(c):[]).filter(x=>x.toLowerCase().includes(t.toLowerCase())),...s],u=Array.from(new Set(l)).slice(0,5);v(u)},[te,f,b,Z,re]),Xe=t=>{z(s=>({...s,roleOnProject:t,roleSearch:t})),v([])},fe=async(t,s,r,c)=>{try{return(await $.checkConflicts(t,s,r,c)).warnings}catch(n){return console.error("Failed to check assignment conflicts:",n),[]}},Ge=async t=>{try{const s=f.find(_=>_.id===t);if(!s)return;const r=new Date,c=r.getDay(),n=new Date(r);n.setDate(r.getDate()-c+(c===0?-6:1));const a=n.toISOString().split("T")[0],l=s.weeklyHours?.[a]||0,u=O.currentWeekHours-l;if(u>0&&o?.id){const _=await fe(s.person,o.id,a,u);L(_)}else L([]);const x={...s.weeklyHours,[a]:O.currentWeekHours},ae={roleOnProject:O.roleOnProject?.trim()||"Team Member",weeklyHours:x};await $.update(t,ae),o?.id&&await T(o.id),ee(null),v([])}catch(s){console.error("Failed to update assignment:",s),P("Failed to update assignment")}},Ze=()=>{ee(null),v([]),L([]),z({roleOnProject:"",currentWeekHours:0,roleSearch:""})},et=async t=>{if(o?.id)try{const s={...o,status:t};j(s),J(!1),await S.mutateAsync({id:o.id,data:{status:t}})}catch{j(o),P("Failed to update project status")}},tt=(t,s)=>{j(t),H(s)},ne=t=>{switch(t?.toLowerCase()){case"active":return"text-emerald-400";case"active_ca":return"text-blue-400";case"planning":return"text-blue-400";case"on_hold":return"text-amber-400";case"completed":return"text-slate-400";case"cancelled":return"text-red-400";default:return"text-slate-400"}},M=t=>t==="active_ca"?"Active CA":t?.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")||"Unknown",F=t=>{C===t?I(h==="asc"?"desc":"asc"):(Y(t),I("asc"))},ve=i.useMemo(()=>d.filter(t=>{let s=!1;k==="Show All"?s=!0:k==="active_no_deliverables"?s=t.status==="active"&&t.id!==void 0&&!Te(t.id):s=t.status===k;const r=!A||t.name?.toLowerCase().includes(A.toLowerCase())||t.client?.toLowerCase().includes(A.toLowerCase())||t.projectNumber?.toLowerCase().includes(A.toLowerCase());return s&&r}),[d,k,A,K]),y=i.useMemo(()=>[...ve].sort((t,s)=>{let r,c;switch(C){case"client":r=t.client||"",c=s.client||"";break;case"name":r=t.name||"",c=s.name||"";break;case"type":r=t.status||"",c=s.status||"";break;case"status":r=t.status||"",c=s.status||"";break;case"nextDeliverable":const a=t.id?se(t.id):null,l=s.id?se(s.id):null;!a&&!l?(r="",c=""):a?l?(r=a.date||"zzz",c=l.date||"zzz",r===c&&(r=a.percentage||0,c=l.percentage||0)):(r=a.date||"zzz",c="zzz"):(r="zzz",c=l.date||"zzz");break;default:r=t.name||"",c=s.name||""}if(C==="nextDeliverable")return h==="asc"?r.getTime()-c.getTime():c.getTime()-r.getTime();const n=r.toString().localeCompare(c.toString());return h==="asc"?n:-n}),[ve,C,h,K]);i.useEffect(()=>{y.length>0&&!o&&(j(y[0]),H(0))},[y,o]),i.useEffect(()=>{const t=s=>{if(s.key==="ArrowUp"||s.key==="ArrowDown"){s.preventDefault();let r=D;s.key==="ArrowUp"&&D>0?r=D-1:s.key==="ArrowDown"&&D<y.length-1&&(r=D+1),r!==D&&(H(r),j(y[r]))}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[D,y]),i.useEffect(()=>{const t=s=>{U&&(s.target.closest(".status-dropdown-container")||J(!1))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[U]);const W=({column:t})=>C!==t?null:e.jsx("span",{className:"ml-1 text-[#007acc]",children:h==="asc"?"â–²":"â–¼"});return m?e.jsx("div",{className:"min-h-screen bg-[#1e1e1e] flex items-center justify-center",children:e.jsx("div",{className:"text-[#969696]",children:"Loading projects..."})}):e.jsxs("div",{className:"min-h-screen bg-[#1e1e1e] flex",children:[e.jsx(at,{}),e.jsxs("div",{className:"flex-1 flex h-screen bg-[#1e1e1e]",children:[e.jsxs("div",{className:"w-1/2 border-r border-[#3e3e42] flex flex-col min-w-0",children:[e.jsxs("div",{className:"p-3 border-b border-[#3e3e42]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h1",{className:"text-lg font-semibold text-[#cccccc]",children:"Projects"}),e.jsx(Ne,{to:"/projects/new",children:e.jsx("button",{className:"px-2 py-0.5 text-xs rounded border bg-[#3e3e42] border-[#3e3e42] text-[#cccccc] hover:bg-[#4e4e52] hover:text-[#cccccc] transition-colors",children:"+ New"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-[#969696] mb-1 block",children:"Filter by Status:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Le.map(t=>e.jsx("button",{onClick:()=>V(t),className:`px-2 py-0.5 text-xs rounded border transition-colors ${k===t?"bg-[#007acc] border-[#007acc] text-white":"bg-[#3e3e42] border-[#3e3e42] text-[#969696] hover:text-[#cccccc]"}`,children:Me(t)},t))})]}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search projects",value:A,onChange:t=>Ce(t.target.value),className:"w-full px-3 py-1.5 text-sm bg-[#3e3e42] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none"})})]})]}),de&&e.jsx("div",{className:"p-3 bg-red-500/20 border-b border-red-500/50",children:e.jsx("div",{className:"text-red-400 text-sm",children:de})}),ue.length>0&&e.jsx("div",{className:"p-3 bg-amber-500/20 border-b border-amber-500/50",children:ue.map((t,s)=>e.jsx("div",{className:"text-amber-400 text-sm flex items-center gap-2",children:e.jsx("span",{children:t})},s))}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-1.5 text-xs text-[#969696] font-medium border-b border-[#3e3e42] bg-[#2d2d30]",children:[e.jsxs("div",{className:"col-span-2 cursor-pointer hover:text-[#cccccc] transition-colors flex items-center",onClick:()=>F("client"),children:["CLIENT",e.jsx(W,{column:"client"})]}),e.jsxs("div",{className:"col-span-3 cursor-pointer hover:text-[#cccccc] transition-colors flex items-center",onClick:()=>F("name"),children:["PROJECT",e.jsx(W,{column:"name"})]}),e.jsxs("div",{className:"col-span-1 cursor-pointer hover:text-[#cccccc] transition-colors flex items-center",onClick:()=>F("type"),children:["TYPE",e.jsx(W,{column:"type"})]}),e.jsxs("div",{className:"col-span-2 cursor-pointer hover:text-[#cccccc] transition-colors flex items-center",onClick:()=>F("status"),children:["STATUS",e.jsx(W,{column:"status"})]}),e.jsxs("div",{className:"col-span-4 cursor-pointer hover:text-[#cccccc] transition-colors flex items-center",onClick:()=>F("nextDeliverable"),children:["NEXT DELIVERABLE",e.jsx(W,{column:"nextDeliverable"})]})]}),e.jsx("div",{className:"overflow-y-auto h-full",children:y.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center text-[#969696]",children:[e.jsx("div",{className:"text-lg mb-2",children:"No projects found"}),e.jsx("div",{className:"text-sm",children:"Try adjusting your filters or create a new project"})]})}):y.map((t,s)=>e.jsxs("div",{onClick:()=>tt(t,s),className:`grid grid-cols-12 gap-2 px-2 py-1.5 text-sm border-b border-[#3e3e42] cursor-pointer hover:bg-[#3e3e42]/50 transition-colors focus:outline-none ${o?.id===t.id?"bg-[#007acc]/20 border-[#007acc]":""}`,tabIndex:0,children:[e.jsx("div",{className:"col-span-2 text-[#969696] text-xs",children:t.client||"No Client"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"text-[#cccccc] font-medium leading-tight",children:t.name}),e.jsx("div",{className:"text-[#969696] text-xs leading-tight",children:t.projectNumber||"No Number"})]}),e.jsx("div",{className:"col-span-1 text-[#969696] text-xs",children:M(t.status||"")}),e.jsx("div",{className:"col-span-2",children:e.jsx("span",{className:`${ne(t.status||"")} px-2 py-0.5 rounded text-xs`,children:M(t.status||"")})}),e.jsx("div",{className:"col-span-4",children:(()=>{const r=t.id?se(t.id):null;return r?e.jsx("div",{className:"text-[#cccccc] text-xs leading-tight",children:ze(r)}):e.jsx("div",{className:"text-[#969696] text-xs",children:"-"})})()})]},t.id))})]})]}),e.jsx("div",{className:"w-1/2 flex flex-col bg-[#2d2d30] min-w-0",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-[#3e3e42]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[#cccccc] mb-2",children:o.name}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[#969696] text-xs",children:"Client:"}),e.jsx("div",{className:"text-[#cccccc]",children:o.client||"No Client"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[#969696] text-xs",children:"Status:"}),e.jsxs("div",{className:"relative status-dropdown-container",children:[e.jsxs("button",{onClick:()=>J(!U),className:`${ne(o.status||"")} hover:bg-[#3e3e42]/50 px-2 py-1 rounded text-sm transition-colors cursor-pointer flex items-center gap-1`,children:[M(o.status||""),e.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})]}),U&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-50 min-w-[120px]",children:Re.map(t=>e.jsx("button",{onClick:()=>et(t),className:`w-full text-left px-3 py-2 text-sm hover:bg-[#3e3e42] transition-colors first:rounded-t last:rounded-b ${o.status===t?"bg-[#007acc]/20":""} ${ne(t)}`,children:M(t)},t))})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[#969696] text-xs",children:"Project Number:"}),e.jsx("div",{className:"text-[#cccccc]",children:o.projectNumber||"No Number"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ne,{to:`/projects/${o.id}/edit`,children:e.jsx("button",{className:"px-2 py-0.5 text-xs rounded border bg-[#3e3e42] border-[#3e3e42] text-[#cccccc] hover:bg-[#4e4e52] hover:text-[#cccccc] transition-colors",children:"Edit Project"})}),e.jsx("button",{onClick:()=>o.id&&Fe(o.id),className:"px-2 py-0.5 text-xs rounded border bg-transparent border-[#3e3e42] text-red-400 hover:bg-red-500/20 hover:border-red-500/50 transition-colors",children:"Delete"})]})]}),o.description&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-[#3e3e42]",children:[e.jsx("div",{className:"text-[#969696] text-xs mb-1",children:"Description:"}),e.jsx("div",{className:"text-[#cccccc] text-sm",children:o.description})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"pb-4 border-b border-[#3e3e42]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-base font-semibold text-[#cccccc]",children:"Assignments"}),e.jsx("button",{onClick:qe,className:"px-2 py-0.5 text-xs rounded border bg-[#3e3e42] border-[#3e3e42] text-[#cccccc] hover:bg-[#4e4e52] hover:text-[#cccccc] transition-colors",children:"+ Add Assignment"})]}),e.jsxs("div",{className:"space-y-2",children:[f.length>0?f.map(t=>e.jsx("div",{children:Z===t.id?e.jsx("div",{className:"p-3 bg-[#3e3e42]/50 rounded border border-[#3e3e42]",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[e.jsx("div",{className:"text-[#cccccc]",children:t.personName||"Unknown"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Role on project...",value:O.roleSearch,onChange:s=>Je(s.target.value),className:"w-full px-2 py-1 text-xs bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none",autoFocus:!0}),Q.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-50 max-h-32 overflow-y-auto",children:Q.map(s=>e.jsx("button",{onClick:()=>Xe(s),className:"w-full text-left px-2 py-1 text-xs hover:bg-[#3e3e42] transition-colors text-[#cccccc] border-b border-[#3e3e42] last:border-b-0",children:s},s))})]}),e.jsx("div",{children:e.jsx("input",{type:"number",min:"0",max:"80",step:"0.5",placeholder:"Hours",value:O.currentWeekHours,onChange:s=>z(r=>({...r,currentWeekHours:parseFloat(s.target.value)||0})),className:"w-full px-2 py-1 text-xs bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield]"})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>t.id&&Ge(t.id),className:"px-2 py-1 text-xs rounded border bg-[#007acc] border-[#007acc] text-white hover:bg-[#005fa3] transition-colors",children:"Save"}),e.jsx("button",{onClick:Ze,className:"px-2 py-1 text-xs rounded border bg-transparent border-[#3e3e42] text-[#969696] hover:text-[#cccccc] hover:bg-[#3e3e42] transition-colors",children:"Cancel"})]})]})}):e.jsxs("div",{className:"flex justify-between items-center p-2 bg-[#3e3e42]/30 rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[#cccccc]",children:t.personName||"Unknown"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[t.personSkills?.filter(s=>s.skillType==="strength").slice(0,3).map((s,r)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-emerald-500/20 text-emerald-400 border border-emerald-500/30",children:s.skillTagName},r)),t.personSkills?.filter(s=>s.skillType==="strength").length===0&&e.jsx("span",{className:"text-[#969696] text-xs",children:"No skills listed"})]})]}),e.jsx("div",{className:"text-[#969696]",children:t.roleOnProject||"Team Member"}),e.jsxs("div",{className:"text-[#969696]",children:[ce(t),"h"]})]})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Ye(t),className:"text-xs px-1 py-0.5 rounded border bg-transparent border-transparent text-[#cccccc] hover:bg-[#3e3e42] hover:border-[#3e3e42] transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>t.id&&Ve(t.id),className:"text-xs px-1 py-0.5 rounded border bg-transparent border-transparent text-red-400 hover:bg-red-500/20 hover:border-red-500/30 transition-colors",children:"Delete"})]})]})},t.id)):xe?null:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-[#969696] text-sm",children:"No assignments yet"}),e.jsx("div",{className:"text-[#969696] text-xs mt-1",children:'Click "Add Assignment" to get started'})]}),xe&&e.jsxs("div",{className:"p-3 bg-[#3e3e42]/50 rounded border border-[#3e3e42]",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[e.jsx("div",{className:"text-[#969696] text-xs uppercase font-medium",children:"PERSON"}),e.jsx("div",{className:"text-[#969696] text-xs uppercase font-medium",children:"ROLE"}),e.jsx("div",{className:"text-[#969696] text-xs uppercase font-medium",children:"ACTIONS"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Start typing name or click to see all...",value:g.personSearch,onChange:t=>$e(t.target.value),onFocus:()=>be(g.personSearch),onKeyDown:Ie,role:"combobox","aria-expanded":N.length>0,"aria-haspopup":"listbox","aria-owns":"person-search-results","aria-describedby":"person-search-help",className:"w-full px-2 py-1 text-xs bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none",autoFocus:!0}),e.jsx("div",{id:"person-search-help",className:"sr-only",children:"Search for people to assign to this project. Use arrow keys to navigate results."}),e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:Ae}),N.length>0&&e.jsx("div",{id:"person-search-results",role:"listbox",className:"absolute top-full left-0 right-0 mt-1 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-50 max-h-32 overflow-y-auto",children:N.map((t,s)=>e.jsxs("button",{onClick:()=>ge(t),className:`w-full text-left px-2 py-1 text-xs hover:bg-[#3e3e42] transition-colors text-[#cccccc] border-b border-[#3e3e42] last:border-b-0 ${B===s?"bg-[#007acc]/30 border-[#007acc]":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:t.name}),t.hasSkillMatch&&e.jsx("span",{className:"text-xs px-1 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"ðŸŽ¯ Skill Match"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-[#969696]",children:t.role}),t.availableHours!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs px-1 py-0.5 rounded ${t.utilizationPercent>100?"text-red-400 bg-red-500/20":t.utilizationPercent>85?"text-amber-400 bg-amber-500/20":t.availableHours>0?"text-emerald-400 bg-emerald-500/20":"text-blue-400 bg-blue-500/20"}`,children:[t.availableHours,"h available"]}),e.jsxs("span",{className:"text-[#969696] text-xs",children:["(",t.utilizationPercent,"% used)"]})]})]})]},t.id))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Role on project...",value:g.roleSearch,onChange:t=>Ue(t.target.value),className:"w-full px-2 py-1 text-xs bg-[#2d2d30] border border-[#3e3e42] rounded text-[#cccccc] placeholder-[#969696] focus:border-[#007acc] focus:outline-none"}),Q.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-[#2d2d30] border border-[#3e3e42] rounded shadow-lg z-50 max-h-32 overflow-y-auto",children:Q.map(t=>e.jsx("button",{onClick:()=>Ke(t),className:"w-full text-left px-2 py-1 text-xs hover:bg-[#3e3e42] transition-colors text-[#cccccc] border-b border-[#3e3e42] last:border-b-0",children:t},t))})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:Be,disabled:!g.selectedPerson,className:"px-2 py-1 text-xs rounded border bg-[#007acc] border-[#007acc] text-white hover:bg-[#005fa3] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save"}),e.jsx("button",{onClick:Qe,className:"px-2 py-1 text-xs rounded border bg-transparent border-[#3e3e42] text-[#969696] hover:text-[#cccccc] hover:bg-[#3e3e42] transition-colors",children:"Cancel"})]})]})]})]})]}),e.jsx(i.Suspense,{fallback:e.jsx(ht,{}),children:e.jsx(xt,{project:o})})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-[#969696]",children:[e.jsx("div",{className:"text-lg mb-2",children:"Select a project"}),e.jsx("div",{className:"text-sm",children:"Choose a project from the list to view details"})]})})})]})]})},yt=()=>e.jsx(bt,{});export{yt as default};
//# sourceMappingURL=index.zuY0xTfW.js.map

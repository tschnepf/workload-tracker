# === Production Environment Template ===
# Copy this file to `.env` on the production host and replace placeholders.
# Do not commit real secrets to version control.

# Project isolation (prefixes container/volume names)
COMPOSE_PROJECT_NAME=workload-tracker-prod

# --- Application Settings ---
DEBUG=false
SECRET_KEY=CHANGE_ME_PRODUCTION_SECRET
ALLOWED_HOSTS=your.domain.com,www.your.domain.com
CSRF_TRUSTED_ORIGINS=https://your.domain.com,https://www.your.domain.com
DJANGO_SETTINGS_MODULE=config.settings
# Note: localhost and 127.0.0.1 are always allowed internally for health checks.

# --- Database (choose one) ---
# Option A: Managed/external Postgres via single URL
# DATABASE_URL=postgresql://workload_user:CHANGE_ME_DB_PASSWORD@db:5432/workload_tracker_prod

# Option B: Containerized Postgres via discrete vars
POSTGRES_DB=workload_tracker_prod
POSTGRES_USER=workload_user
POSTGRES_PASSWORD=CHANGE_ME_DB_PASSWORD
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Database readiness tuning (backend waits for DB before starting)
DB_WAIT_TIMEOUT_SECS=120
DB_WAIT_SLEEP_SECS=1

# --- Redis ---
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
# Optional URL (uncomment to override):
# REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD@redis:6379/1

# --- Security & Auth ---
AUTH_ENFORCED=true
COOKIE_REFRESH_AUTH=true
OPENAPI_PUBLIC=false
JWT_ACCESS_MINUTES=20
CSP_ENABLED=true
CSP_REPORT_ONLY=false
CSP_REPORT_URI=/csp-report/
SECURE_SSL_REDIRECT=true
SESSION_COOKIE_SAMESITE=Lax
CSRF_COOKIE_SAMESITE=Lax

# --- Backups & Maintenance ---
BACKUPS_DIR=/backups
READ_ONLY_MODE=false

# Celery Beat schedule file (must be writable in the container)
# Use tmpfs path to avoid permission issues on readâ€‘only filesystems
CELERY_BEAT_SCHEDULE_FILE=/tmp/celery/beat-schedule

# --- Deploy timing controls ---
# When false, backend container skips auto-migrate; use for controlled cutovers
RUN_MIGRATIONS_ON_START=true

# --- Optional: CORS (only if serving frontend from a different domain) ---
# CORS_ALLOWED_ORIGINS=https://your.domain.com

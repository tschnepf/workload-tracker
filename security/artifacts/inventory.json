{
  "repo": "workload-tracker",
  "stacks": {
    "backend": {
      "framework": "Django/DRF",
      "python_version": "3.11",
      "packages_file": "backend/requirements.txt",
      "notable_packages": [
        "Django==5.2.6",
        "djangorestframework==3.16.1",
        "djangorestframework-simplejwt==5.5.1",
        "celery[redis]==5.5.3",
        "redis==5.0.1",
        "psycopg2-binary==2.9.10",
        "drf-spectacular==0.28.0",
        "sentry-sdk[django]==2.38.0"
      ]
    },
    "frontend": {
      "framework": "React + Vite + TypeScript",
      "node_version": "20",
      "packages_file": "frontend/package.json",
      "notable_packages": [
        "react@19.1.1",
        "react-router@7.9.1",
        "@tanstack/react-query@5.59.0",
        "vite@7.1.5",
        "typescript@5.9.2",
        "openapi-typescript@6.7.6",
        "openapi-fetch@0.9.2"
      ]
    },
    "proxy": {
      "component": "nginx",
      "images": ["nginx:alpine"],
      "config": [
        "nginx/nginx.conf",
        "nginx/sites-available-dev/workload-tracker.dev.conf"
      ]
    }
  },
  "containers": {
    "dockerfiles": [
      {"path": "docker/backend/Dockerfile", "base_images": ["python:3.11-slim"]},
      {"path": "docker/frontend/Dockerfile", "base_images": ["node:20-alpine"]}
    ],
    "compose_dev": "docker-compose.yml",
    "compose_prod": "docker-compose.prod.yml",
    "images_external": ["postgres:17.6", "redis:7-alpine", "nginx:alpine"]
  },
  "services": {
    "dev": [
      {"name": "nginx", "ports": ["80:80"], "depends_on": ["backend", "frontend"]},
      {"name": "frontend", "ports": ["${FRONTEND_PORT}:3000"], "env": ["VITE_API_URL=/api"], "depends_on": ["backend"]},
      {"name": "backend", "ports": ["${BACKEND_PORT}:8000"], "env_file": [".env"], "depends_on": ["db", "redis"]},
      {"name": "worker", "ports": [], "depends_on": ["db", "redis"]},
      {"name": "worker_db", "ports": [], "depends_on": ["db", "redis"]},
      {"name": "worker_beat", "ports": [], "depends_on": ["db", "redis"]},
      {"name": "db", "ports": ["5432:5432"], "volumes": ["postgres_data_v17:/var/lib/postgresql/data"]},
      {"name": "redis", "ports": ["6379:6379"], "volumes": []}
    ],
    "prod": [
      {"name": "nginx", "ports": ["80:80", "443:443"], "depends_on": ["backend", "frontend"]},
      {"name": "frontend", "ports": [], "healthcheck": "http://localhost:3000/"},
      {"name": "backend", "ports": [], "healthcheck": "http://localhost:8000/api/health/"},
      {"name": "db", "ports": [], "volumes": ["postgres_data_v17:/var/lib/postgresql/data"]},
      {"name": "redis", "ports": [], "volumes": ["redis_data:/data"]},
      {"name": "worker", "ports": []},
      {"name": "worker_db", "ports": []},
      {"name": "worker_beat", "ports": []}
    ]
  },
  "ci_cd": {
    "workflows": [
      ".github/workflows/security.yml",
      ".github/workflows/openapi-ci.yml",
      ".github/workflows/prod-config-guard.yml",
      ".github/workflows/e2e.yml",
      ".github/workflows/utf8-check.yml"
    ]
  },
  "env_samples": [".env.example"],
  "notes": [
    "Dev compose exposes db (5432) and redis (6379) on host; prod does not.",
    "Global nginx config sets deprecated X-XSS-Protection header (inventory only).",
    "OpenAPI schema and Swagger UI are currently unauthenticated; review in Phase 1."
  ]
}

